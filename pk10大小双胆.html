<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
<title>pk10</title>
<script src="pk10.json"></script>
<script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
<div id="app"> 

</div>

<script>
//判断双胆
function ifdxsd(argument,ball){   
	var ball=parseInt(ball)
	var result=''
	switch (argument) {
		case 'dx':
			ball>5?result="大":result="小"
			break;
		case 'sd':
			ball%2==0?result="双":result="单"
			break;
	}
	return result
}

//构造大小双胆新对象
function dxsd_array(argument){
	
	var dxsd_list=[]
	$.each(data, function(key, list){	
	  var array={}
	  var balls={'ball1':[],'ball2':[],'ball3':[],'ball4':[],'ball5':[],'ball6':[],'ball7':[],'ball8':[],'ball9':[],'ball10':[]} //1-10名
	  array[key]=balls
	  dxsd_list.push(array)

	  $.each(list, function(index,item){
		$.each(item.result, function(i,result){
			var num='ball'+i.substr(1) //取名次
			var dxsd_ball = ifdxsd(argument,result) 
			array[key][num].push(dxsd_ball)
		})

	  })
	})
	return dxsd_list 
 }


var list=[]
function fliter(balls,augument,startindex,endindex,position){
	var strings=balls
	var start=startindex,end=endindex,pos=position,reg=augument //开始、结束索引，位置记录，规则

	if(strings.indexOf(reg, pos)>-1){   
		if(pos==0&&strings.indexOf(reg.slice(1,3))==0) {   //首次检索修规则
			start=0;	
		} else{start=strings.indexOf(reg, pos) }      //头部定位截取索引            
	    pos+=1;                                     //索引下移，开始尾部截取定位
		var array=[]	

		if(strings.indexOf(reg, pos)<0){
			if(reg.slice(0,2)==strings.slice(-2)){            //尾部检索修规则
       		var result=strings.slice(start) 
		    array.push(result)
		    list.push(array)
		    return
	   	    }
		}
		else{  
			end=strings.indexOf(reg, pos)  //尾部定位截取索引			
		    var result=strings.slice(start,end+3) //截取存组
		    array.push(result)
		    list.push(array)
		   // pos=strings.indexOf(reg, pos)   
		    fliter(strings,reg,start,end,end)   //再调用

		}
	}


	return list
}
var dx=dxsd_array('dx') 
var sd=dxsd_array('sd') 
  
var balls=dx[8]['2017-6-19'].ball1.join().replace(/,/g, "")
console.log(balls)
var results=fliter(balls,"小大小",0,0,0)//大之间
console.log(results)

var balls2=sd[8]['2017-6-19'].ball1.join().replace(/,/g, "")
console.log(balls2)
var results2=fliter(balls2,"双单双",0,0,0)//大之间
console.log(results2)

</script>
</html>
