<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
<title>pk10</title>
<script src="pk10.json"></script>
<script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
<div id="app"> 

</div>

<script>
//判断双胆
function ifdxsd(argument,ball){   
	var ball=parseInt(ball)
	var result=''
	switch (argument) {
		case 'dx':
			ball>5?result="大":result="小"
			break;
		case 'sd':
			ball%2==0?result="双":result="单"
			break;
	}
	return result
}

//构造大小双胆新对象
function dxsd_array(argument){
	
	var dxsd_list=[]
	$.each(data, function(key, list){	
	  var array={}
	  var balls={'ball1':[],'ball2':[],'ball3':[],'ball4':[],'ball5':[],'ball6':[],'ball7':[],'ball8':[],'ball9':[],'ball10':[]} //1-10名
	  array[key]=balls
	  dxsd_list.push(array)

	  $.each(list, function(index,item){
		$.each(item.result, function(i,result){
			var num='ball'+i.substr(1) //取名次
			var dxsd_ball = ifdxsd(argument,result) 
			array[key][num].push(dxsd_ball)
		})

	  })
	})
	return dxsd_list 
 }

var sd=dxsd_array('sd') 
console.log(sd)  

// var stirng=dx[8]['2017-6-19'].ball1.join()
 var string="d,x,x,x,x,x,x,d,d,x,d,d,d,x,d,x,d,d,d,d,x,d,d,x,x,x,d,d,d,x,d,x,d,d,d,x,x,d,d,d,x,d,x,x,x,d,d,x,x,x,d,d,x,x,x,x,x,x,d,d,d,x,x,d,d,x,x,x,x,x,d,x,d,d,d,x,d,d,x,d,d,d,x,x,x,x,d,x,d,d,d,d,d,x,x,d,d,x,x,x,d,d,d,d,d,x,x,d,d,d,x,x,d,d,d,x,d,x,d,d,x,x,x,x,d,d,x,d,d,d,x,d,x,d,x,x,x,d,x,d,x,d,x,d,d,d,x,x,d,d,x,x,x,d,x,d,x,d,d,x,d,d,d,d,d,d,x,x,d,d,x,x,d,d,d,x,x,d,d"

 ntring=string.replace(/,/g, "")
 console.log(ntring)

var list=[]
function fliter(augument,startindex,endindex,position){
	var strings=ntring
	var start=startindex,end=endindex,pos=position,reg=augument //开始、结束索引，位置记录，规则

	if(strings.indexOf(reg, pos)>-1){   
		if(pos==0&&strings.indexOf(reg.slice(1,3))==0) {   //首次检索修规则
			start=0;	
		} else{start=strings.indexOf(reg, pos) }      //头部定位截取索引            
	    pos+=2;                                     //开始尾部定位
	    reg=augument
		var array=[]	
		if(strings.indexOf(reg, pos)<0){return;}else{  
			end=strings.indexOf(reg, pos)  //尾部定位截取索引			
		    var result=strings.slice(start,end+3) //截取存组
		    array.push(result)
		    list.push(array)
		   // pos=strings.indexOf(reg, pos)   
		    fliter(reg,start,end,end)   //再调用

		}
	}

	return list
}

 var results=fliter("xdx",0,0,0)
 console.log(results)
</script>
</html>
